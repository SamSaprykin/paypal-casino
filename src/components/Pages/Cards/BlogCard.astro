---
import { format } from "date-fns";
import { addHttps, slugify } from "../../../lib/helpers";
import { Image } from "astro:assets";

const { post } = Astro.props;
---

<a
  href={`/blog/${slugify(post.category)}/${post.slug}`}

  class="bg-white border border-blue-500 rounded-xl shadow-md overflow-hidden flex flex-col transition-transform hover:-translate-y-1 hover:shadow-lg hover:border-blue-700 group"
>
  <!-- Image -->
  <div class="relative w-full h-40">
    <Image
      src={addHttps(
        post.featuredImage?.fields?.file?.url
      )}
      alt={post.title}
      class="object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"
      loading="lazy"
      width={400}
      height={300}
      format="webp"
    />
    <span class="absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-md shadow-md font-semibold uppercase tracking-wide">
      {post.category}
    </span>
  </div>

  <!-- Content -->
  <div class="p-4 flex flex-col flex-grow bg-gradient-to-b from-blue-50 to-white">
    <h3 class="text-lg font-bold text-blue-800 mb-2 group-hover:text-blue-900 transition-colors duration-300">
      {post.title}
    </h3>
    <p class="text-sm text-gray-700 mb-4 flex-grow leading-relaxed">
      {post.cardDescription}
    </p>
    <div class="text-xs text-gray-600 flex justify-between items-center">
      <span>{format(new Date(post.created), "MMM d, yyyy")}</span>
      <span class="italic text-blue-700">
        {post.author?.fields?.name || "Anonymous"}
      </span>
    </div>
  </div>
</a>

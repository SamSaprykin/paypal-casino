---
const { content, firstBonus } = Astro.props;

const addHttps = (url) => url?.startsWith("http") ? url : `https:${url}`;
import CtaBoxWithImage from "./CtaBoxWithImage.astro";
import HighlightBox from "./HighlightBox.astro";

---

<!-- Highlight Box -->
<Fragment>
  <div class="my-6 border-2 border-yellow-500 bg-gradient-to-br from-yellow-200 via-gray-100 to-orange-100 px-6 md:px-12 py-4 rounded-lg flex flex-col md:flex-row gap-0 items-center lg:gap-12 w-full">
    <svg class="w-20 h-20 min-w-20 min-h-20 text-yellow-500" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 2L15 8l6 1-4 4 1 6-5-3-5 3 1-6-4-4 6-1 3-6z"/>
    </svg>
    <div class="text-yellow-900">
      <slot name="highlight-content" />
    </div>
    <div class="mt-4 lg:mt-0">
      <button
        class="bg-yellow-500 text-white font-semibold px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-yellow-600 transition-colors"
        onclick={`window.open('${firstBonus.fields.referralUrl}', '_blank')`}
      >
        Play Now
        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>
</Fragment>

<!-- CTA Box With Image -->
<div class="flex flex-col gap-4 w-full sm:w-[90%] my-8 border-2 border-yellow-500 rounded-xl p-4 relative overflow-hidden mx-auto bg-gradient-to-br from-yellow-200 via-gray-100 to-orange-100">
  <div class="flex flex-col lg:gap-4">
    <div class="flex flex-col gap-2 w-full sm:w-1/3">
      <h3 class="text-2xl sm:text-3xl font-bold mb-2 text-yellow-700">
        {firstBonus.fields.name}
      </h3>
      <p class="text-base sm:text-lg text-gray-600 lg:mb-4">
        {firstBonus.fields.description}
      </p>
    </div>
    <button
      class="w-full lg:max-w-60 mt-4 lg:mt-0 bg-yellow-500 text-white font-semibold px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-yellow-600 transition-colors"
      onclick={`window.open('${firstBonus.fields.referralUrl}', '_blank')`}
    >
      Get Bonus
      <svg class="w-4 h-4 ml-2 transform transition-all duration-300 group-hover:ml-4 group-hover:text-gray-700 rounded-full group-hover:bg-yellow-200" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    </button>
  </div>
  <img
    src={addHttps(firstBonus.fields.image?.url)}
    alt={firstBonus.fields.name}
    width="400"
    height="300"
    class="border-4 border-yellow-200 object-cover rounded-xl mx-auto my-2 lg:ml-8 relative lg:absolute lg:top-2 lg:-right-4"
  />
</div>

<!-- Markdown Content -->
<div class="mt-8 px-4 md:px-0 w-full max-w-5xl mx-auto">
  <div class="max-w-none">
    <div class="mb-8">
      <!-- You can render markdown as HTML here using Astro's Markdown support -->
      {content}
    </div>
  </div>
</div>
